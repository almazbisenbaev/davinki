<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>DaVinki by @almazbisenbaev</title>
  <link rel="stylesheet" href="/src/style.css" />
</head>
<body>

  <!-- Welcome Screen -->
  <div id="welcomeScreen" class="screen welcome-screen">
    <div class="screen-content">

      <div class="welcome-screen-header">
        <h2>DaVinki. <span>Online image editor</span></h2>
      </div>

      <div class="canvas-size">

        <div class="canvas-size-title">Canvas Size:</div>

        <div class="canvas-size-inputs">
          <div class="size-inputs">
            <div>
              <div>Width:</div>
              <input type="number" id="canvasWidth" value="800" min="1" max="4000"> px
            </div>
            <div>
              <div>Height:</div>
              <input type="number" id="canvasHeight" value="800" min="1" max="4000"> px
            </div>
          </div>
        </div>

        <div class="canvas-size-buttons">
          <button class="ui-btn ui-btn-primary" id="btnNewProject">Create New Project</button>
          <div>or</div>
          <button class="ui-btn ui-btn-primary" id="btnUploadImage">Upload Image</button>
        </div>
        
      </div>

      <div class="welcome-footer">Author: <a href="https://helloalmaz.com" target="_blank">@almazbisenbaev</a></div>

    </div>
  </div>


  <!-- Export Modal -->
  <div id="exportModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Export Image</h2>
      <div class="export-options">
        <label>Format:</label>
        <div class="format-options">
          <label><input type="radio" name="exportFormat" value="image/jpeg" checked> JPG</label>
          <label><input type="radio" name="exportFormat" value="image/png"> PNG</label>
          <label><input type="radio" name="exportFormat" value="image/webp"> WEBP</label>
        </div>
        <div class="quality-option">
          <label for="exportQuality">Quality (JPG/WEBP):</label>
          <input type="range" id="exportQuality" min="0.1" max="1" step="0.1" value="0.9">
          <span id="qualityValue">90%</span>
        </div>
      </div>
      <div class="modal-buttons">
        <button id="btnExportCancel">Cancel</button>
        <button id="btnExportConfirm">Export</button>
      </div>
    </div>
  </div>

  <!-- Canvas Resize Modal -->
  <div id="canvasResizeModal" class="modal" style="display: none;">
    <div class="modal-content">
      <h2>Resize Canvas</h2>
      <div class="canvas-size-inputs">
        <label>New Canvas Size:</label>
        <div class="size-inputs">
          <input type="number" id="newCanvasWidth" value="800" min="1" max="4000"> √ó
          <input type="number" id="newCanvasHeight" value="800" min="1" max="4000"> px
        </div>
      </div>
      <div class="resize-options">
        <label>Anchor Point:</label>
        <div class="anchor-selector">
          <div class="anchor-grid">
            <div class="anchor-point" data-anchor="top-left"></div>
            <div class="anchor-point" data-anchor="top-center"></div>
            <div class="anchor-point" data-anchor="top-right"></div>
            <div class="anchor-point" data-anchor="middle-left"></div>
            <div class="anchor-point active" data-anchor="middle-center"></div>
            <div class="anchor-point" data-anchor="middle-right"></div>
            <div class="anchor-point" data-anchor="bottom-left"></div>
            <div class="anchor-point" data-anchor="bottom-center"></div>
            <div class="anchor-point" data-anchor="bottom-right"></div>
          </div>
        </div>
      </div>
      <div class="modal-buttons">
        <button id="btnResizeCancel">Cancel</button>
        <button id="btnResizeConfirm">Resize Canvas</button>
      </div>
    </div>
  </div>

  <!-- Layer Context Menu -->
  <div id="layerContextMenu" class="context-menu" style="display: none;">
    <div class="context-menu-item" id="contextRename">Rename</div>
    <div class="context-menu-item" id="contextDelete">Delete</div>
  </div>

  <!-- Main UI (hidden until project loaded) -->
  <div id="app" class="app hidden">
    <!-- Menu Bar -->
    <div class="menu-bar">
      <div class="menu">
        <button class="menu-title" id="fileMenuBtn" data-dropdown="fileDropdown">File</button>
        <div class="dropdown" id="fileDropdown">
          <div id="fileNewProject" class="dropdown-item">New Project</div>
          <div id="fileExport" class="dropdown-item">Export</div>
        </div>
      </div>
      <div id="canvasSize" class="canvas-size-btn">Canvas: 0 √ó 0 px</div>
    </div>

    <!-- Toolbar -->
    <div class="toolbar">
      <div class="tool active" data-tool="move">
        <svg fill="none" height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg">
          <path d="M7.92098 2.29927C6.93571 1.53286 5.5 2.23498 5.5 3.48325V20.492C5.5 21.9142 7.2945 22.538 8.17661 21.4224L12.3676 16.1222C12.6806 15.7264 13.1574 15.4956 13.6619 15.4956H20.5143C21.9425 15.4956 22.5626 13.6885 21.4353 12.8116L7.92098 2.29927Z" fill="#212121"/>
        </svg>
      </div>
      <div class="tool" data-tool="text">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <polyline points="4,7 4,4 20,4 20,7"></polyline>
          <line x1="9" y1="20" x2="15" y2="20"></line>
          <line x1="12" y1="4" x2="12" y2="20"></line>
        </svg>
      </div>
      <div class="tool" data-tool="crop">
        <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-crop">
          <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
          <path d="M8 5v10a1 1 0 0 0 1 1h10" />
          <path d="M5 8h10a1 1 0 0 1 1 1v10" />
        </svg>
      </div>
      
      <!-- Undo button -->
      <div class="toolbar-separator"></div>
      <button id="btnUndo" class="toolbar-btn" disabled title="Undo">
        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
          <path d="M3 7v6h6"/>
          <path d="m21 17a9 9 0 00-9-9 9 9 0 00-6 2.3L3 13"/>
        </svg>
      </button>
    </div>

    <!-- Workspace -->
    <div class="workspace">
      <!-- Canvas Container (for relative positioning) -->
      <div class="canvas-container">
        <canvas id="canvas"></canvas>
        
        <!-- Crop Overlay -->
        <div id="cropOverlay" class="crop-overlay" style="display: none;">
          <div class="crop-area">
            <!-- Resize handles -->
            <div class="crop-handle crop-handle-nw" data-direction="nw"></div>
            <div class="crop-handle crop-handle-n" data-direction="n"></div>
            <div class="crop-handle crop-handle-ne" data-direction="ne"></div>
            <div class="crop-handle crop-handle-w" data-direction="w"></div>
            <div class="crop-handle crop-handle-e" data-direction="e"></div>
            <div class="crop-handle crop-handle-sw" data-direction="sw"></div>
            <div class="crop-handle crop-handle-s" data-direction="s"></div>
            <div class="crop-handle crop-handle-se" data-direction="se"></div>
          </div>
          
          <!-- Crop Controls -->
          <div class="crop-controls">
            <button id="btnCropConfirm" class="crop-btn crop-btn-confirm">‚úì Crop</button>
            <button id="btnCropCancel" class="crop-btn crop-btn-cancel">‚úï Cancel</button>
          </div>
        </div>
      </div>

      <!-- Layers Panel -->
      <div class="layers-panel">
        <div class="panel-header">
          <span>Layers</span>
          <button id="btnAddLayer" class="btn-add">+</button>
          <button id="btnAddImageLayer" class="btn-add">üñºÔ∏è</button>
        </div>
        <div id="layersList" class="layers-list"></div>
        
        <!-- Properties Panel -->
        <div class="properties-panel">
          <div class="panel-header">
            <span>Properties</span>
          </div>
          <div id="propertiesContent" class="properties-content">
            <div class="no-selection">Select a tool or layer to see properties</div>
          </div>
        </div>
      </div>
    </div>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>
</html>